# Global Codebase Audit & Optimization (Slop Purge) Implementation Plan

## Overview
Purge "Jerry-grade" performance bottlenecks and technical debt from the ML and pricing modules to achieve maximum throughput and maintainability.

## Current State Analysis
- **ML Bottleneck**: `src/ml/autonomous_pipeline.py:356` uses `iterrows()`.
- **Pricing Bottleneck**: `src/services/pricing_service.py` (L32, L187, L217) uses manual `for` loops instead of vectorized dispatch.
- **Typing Slop**: Inconsistent type hints across the `src/ml` directory.

## Implementation Approach
1. Use NumPy/Pandas vectorization to replace all manual iteration in performance-critical paths.
2. Refactor `PricingService` to batch requests before calling the JIT kernels.
3. Enforce strict type hints using `mypy` standards.

## Phase 1: ML Pipeline Vectorization
### Overview
Replace `iterrows()` with vectorized Pandas operations in `src/ml/autonomous_pipeline.py`.
### Changes Required:
#### 1. src/ml/autonomous_pipeline.py
**Changes**: Refactor the row iteration logic to use `.loc`, `.iloc`, or direct vectorized assignment.
### Success Criteria:
#### Automated:
- [ ] `pytest tests/unit/ml/test_autonomous_pipeline.py`
#### Manual:
- [ ] Benchmark execution time before/after the change.

## Phase 2: Pricing Service Batching
### Overview
Refactor `src/services/pricing_service.py` to eliminate manual loops.
### Changes Required:
#### 1. src/services/pricing_service.py
**Changes**: Use NumPy broadcasting and pre-allocation for batch pricing requests.
### Success Criteria:
#### Automated:
- [ ] `pytest tests/unit/services/test_pricing_service.py`

## Phase 3: Typing and Standards Purge
### Overview
Apply strict typing and optimize comments across the core modules.
### Changes Required:
#### 1. src/ml/*.py
**Changes**: Add missing type hints and prune redundant comments.
### Success Criteria:
#### Automated:
- [ ] `mypy src/ml src/pricing`
