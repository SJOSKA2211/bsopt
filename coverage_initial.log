============================= test session starts ==============================
platform linux -- Python 3.13.11, pytest-9.0.2, pluggy-1.6.0 -- /home/kamau/bsopt/.venv/bin/python3
cachedir: .pytest_cache
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /home/kamau/bsopt
configfile: pytest.ini (WARNING: ignoring pytest config in pyproject.toml!)
testpaths: tests
plugins: cov-7.0.0, anyio-4.12.0, asyncio-1.3.0, mock-3.15.1, docker-3.2.5, Faker-40.1.2, timeout-2.4.0, benchmark-5.2.3, locust-2.43.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1764 items

tests/aiops/test_aiops_orchestrator.py::TestAIOpsOrchestrator::test_detect_anomalies_data_drift_enabled PASSED [  0%]
tests/aiops/test_aiops_orchestrator.py::TestAIOpsOrchestrator::test_detect_anomalies_data_drift_insufficient_data PASSED [  0%]
tests/aiops/test_aiops_orchestrator.py::TestAIOpsOrchestrator::test_detect_anomalies_high_error_rate_and_latency PASSED [  0%]
tests/aiops/test_aiops_orchestrator.py::TestAIOpsOrchestrator::test_detect_anomalies_ml_multivariate_enabled PASSED [  0%]
tests/aiops/test_aiops_orchestrator.py::TestAIOpsOrchestrator::test_detect_anomalies_ml_univariate_enabled PASSED [  0%]
tests/aiops/test_aiops_orchestrator.py::TestAIOpsOrchestrator::test_detect_anomalies_no_anomalies PASSED [  0%]
tests/aiops/test_aiops_orchestrator.py::TestAIOpsOrchestrator::test_init_all_detectors_enabled PASSED [  0%]
tests/aiops/test_aiops_orchestrator.py::TestAIOpsOrchestrator::test_init_autoencoder_disabled PASSED [  0%]
tests/aiops/test_aiops_orchestrator_remediation.py::TestAIOpsOrchestratorRemediation::test_remediate_data_drift PASSED [  0%]
tests/aiops/test_aiops_orchestrator_remediation.py::TestAIOpsOrchestratorRemediation::test_remediate_high_error_rate PASSED [  0%]
tests/aiops/test_aiops_orchestrator_remediation.py::TestAIOpsOrchestratorRemediation::test_remediate_high_latency PASSED [  0%]
tests/aiops/test_aiops_orchestrator_remediation.py::TestAIOpsOrchestratorRemediation::test_remediate_multivariate_anomaly PASSED [  0%]
tests/aiops/test_aiops_orchestrator_remediation.py::TestAIOpsOrchestratorRemediation::test_remediate_univariate_anomaly PASSED [  0%]
tests/aiops/test_aiops_orchestrator_remediation.py::TestAIOpsOrchestratorRemediation::test_run_loop_exception_handling PASSED [  0%]
tests/aiops/test_aiops_orchestrator_remediation.py::TestAIOpsOrchestratorRemediation::test_run_loop_with_anomalies PASSED [  0%]
tests/aiops/test_autoencoder_detector.py::TestAutoencoderDetector::test_anomaly_detection PASSED [  0%]
tests/aiops/test_autoencoder_detector.py::TestAutoencoderDetector::test_fit_empty_data_raises_error PASSED [  0%]
tests/aiops/test_autoencoder_detector.py::TestAutoencoderDetector::test_fit_predict PASSED [  1%]
tests/aiops/test_autoencoder_detector.py::TestAutoencoderDetector::test_fit_predict_convenience_method PASSED [  1%]
tests/aiops/test_autoencoder_detector.py::TestAutoencoderDetector::test_init PASSED [  1%]
tests/aiops/test_autoencoder_detector.py::TestAutoencoderDetector::test_predict_not_fitted_raises_error PASSED [  1%]
tests/aiops/test_autoencoder_detector.py::TestAutoencoderDetector::test_verbose_logging PASSED [  1%]
tests/aiops/test_data_drift_detector.py::TestDataDriftDetector::test_detect_drift_empty_data PASSED [  1%]
tests/aiops/test_data_drift_detector.py::TestDataDriftDetector::test_detect_drift_mismatched_dimensions PASSED [  1%]
tests/aiops/test_data_drift_detector.py::TestDataDriftDetector::test_detect_drift_multivariate PASSED [  1%]
tests/aiops/test_data_drift_detector.py::TestDataDriftDetector::test_detect_drift_univariate_ks_drift PASSED [  1%]
tests/aiops/test_data_drift_detector.py::TestDataDriftDetector::test_detect_drift_univariate_no_drift PASSED [  1%]
tests/aiops/test_data_drift_detector.py::TestDataDriftDetector::test_detect_drift_univariate_psi_drift PASSED [  1%]
tests/aiops/test_data_drift_detector.py::TestDataDriftDetector::test_init PASSED [  1%]
tests/aiops/test_docker_remediator.py::test_docker_remediator_init PASSED [  1%]
tests/aiops/test_docker_remediator.py::test_docker_remediator_restart_service_success PASSED [  1%]
tests/aiops/test_docker_remediator.py::test_docker_remediator_restart_service_not_found PASSED [  1%]
tests/aiops/test_docker_remediator.py::test_docker_remediator_restart_service_failure PASSED [  1%]
tests/aiops/test_docker_remediator.py::test_docker_remediator_restart_action_failure PASSED [  1%]
tests/aiops/test_docker_remediator.py::test_docker_remediator_restart_service_empty_name_raises_error PASSED [  1%]
tests/aiops/test_docker_remediator.py::test_docker_remediator_init_failure PASSED [  2%]
tests/aiops/test_isolation_forest_detector.py::TestIsolationForestDetector::test_fit_predict_1d PASSED [  2%]
tests/aiops/test_isolation_forest_detector.py::TestIsolationForestDetector::test_fit_predict_2d PASSED [  2%]
tests/aiops/test_isolation_forest_detector.py::TestIsolationForestDetector::test_fit_predict_empty_data PASSED [  2%]
tests/aiops/test_isolation_forest_detector.py::TestIsolationForestDetector::test_init_invalid_contamination PASSED [  2%]
tests/aiops/test_isolation_forest_detector.py::TestIsolationForestDetector::test_predict_1d_reshape PASSED [  2%]
tests/aiops/test_isolation_forest_detector.py::TestIsolationForestDetector::test_predict_not_fitted PASSED [  2%]
tests/aiops/test_isolation_forest_detector.py::TestIsolationForestDetector::test_predict_success PASSED [  2%]
tests/aiops/test_ml_pipeline_trigger.py::test_ml_pipeline_trigger_init PASSED [  2%]
tests/aiops/test_ml_pipeline_trigger.py::test_ml_pipeline_trigger_success PASSED [  2%]
tests/aiops/test_ml_pipeline_trigger.py::test_ml_pipeline_trigger_failure PASSED [  2%]
tests/aiops/test_ml_pipeline_trigger.py::test_ml_pipeline_trigger_missing_config_raises_error PASSED [  2%]
tests/aiops/test_prometheus_adapter.py::test_prometheus_client_class_exists PASSED [  2%]
tests/aiops/test_prometheus_adapter.py::test_prometheus_client_init PASSED [  2%]
tests/aiops/test_prometheus_adapter.py::test_check_connectivity_success PASSED [  2%]
tests/aiops/test_prometheus_adapter.py::test_check_connectivity_failure PASSED [  2%]
tests/aiops/test_prometheus_adapter.py::test_get_5xx_error_rate_success PASSED [  2%]
tests/aiops/test_prometheus_adapter.py::test_get_5xx_error_rate_empty_service PASSED [  3%]
tests/aiops/test_prometheus_adapter.py::test_get_5xx_error_rate_query_failure PASSED [  3%]
tests/aiops/test_prometheus_adapter.py::test_get_p95_latency_success PASSED [  3%]
tests/aiops/test_prometheus_adapter.py::test_get_p95_latency_empty_service PASSED [  3%]
tests/aiops/test_prometheus_adapter.py::test_get_p95_latency_query_failure PASSED [  3%]
tests/aiops/test_redis_remediator.py::test_redis_remediator_init PASSED  [  3%]
tests/aiops/test_redis_remediator.py::test_redis_remediator_purge_cache_success PASSED [  3%]
tests/aiops/test_redis_remediator.py::test_redis_remediator_purge_cache_no_keys_found PASSED [  3%]
tests/aiops/test_redis_remediator.py::test_redis_remediator_purge_cache_failure PASSED [  3%]
tests/aiops/test_redis_remediator.py::test_redis_remediator_purge_cache_empty_pattern_raises_error PASSED [  3%]
tests/aiops/test_redis_remediator.py::test_redis_remediator_init_failure PASSED [  3%]
tests/aiops/test_self_healing_orchestrator.py::test_self_healing_cycle_no_anomalies PASSED [  3%]
tests/aiops/test_self_healing_orchestrator.py::test_self_healing_cycle_remediation PASSED [  3%]
tests/aiops/test_self_healing_orchestrator.py::test_self_healing_loop_control PASSED [  3%]
tests/aiops/test_timeseries_anomaly_detector.py::test_anomaly_detector_training PASSED [  3%]
tests/aiops/test_timeseries_anomaly_detector.py::test_anomaly_detector_detection PASSED [  3%]
tests/aiops/test_timeseries_anomaly_detector.py::test_anomaly_detector_unfitted_error PASSED [  3%]
tests/api/middleware/test_idempotency.py::test_fingerprint_consistency PASSED [  3%]
tests/api/middleware/test_idempotency.py::test_fingerprint_differs_on_body PASSED [  4%]
tests/api/middleware/test_idempotency.py::test_fingerprint_differs_on_path PASSED [  4%]
tests/api/middleware/test_idempotency.py::test_fingerprint_header_insensitivity PASSED [  4%]
tests/api/middleware/test_idempotency_middleware.py::test_idempotency_new_request PASSED [  4%]
tests/api/middleware/test_idempotency_middleware.py::test_idempotency_duplicate_cached PASSED [  4%]
tests/api/middleware/test_idempotency_middleware.py::test_idempotency_conflict_in_progress PASSED [  4%]
tests/api/middleware/test_idempotency_middleware.py::test_idempotency_skip_get PASSED [  4%]
tests/api/middleware/test_idempotency_middleware.py::test_idempotency_error_re_raises PASSED [  4%]
tests/api/middleware/test_idempotency_middleware.py::test_idempotency_not_cached_on_500 PASSED [  4%]
tests/api/middleware/test_idempotency_middleware.py::test_idempotency_streaming_not_cached PASSED [  4%]
tests/api/middleware/test_idempotency_middleware.py::test_generate_fingerprint_logic PASSED [  4%]
tests/api/middleware/test_idempotency_middleware.py::test_idempotency_caching_logic_unmocked_fp PASSED [  4%]
tests/api/middleware/test_logging.py::TestStructuredLogger::test_critical_log PASSED [  4%]
tests/api/middleware/test_logging.py::TestStructuredLogger::test_debug_log PASSED [  4%]
tests/api/middleware/test_logging.py::TestStructuredLogger::test_error_log PASSED [  4%]
tests/api/middleware/test_logging.py::TestStructuredLogger::test_exception_log PASSED [  4%]
tests/api/middleware/test_logging.py::TestStructuredLogger::test_info_log PASSED [  4%]
tests/api/middleware/test_logging.py::TestStructuredLogger::test_set_default_fields PASSED [  4%]
tests/api/middleware/test_logging.py::TestStructuredLogger::test_warning_log PASSED [  5%]
tests/api/middleware/test_logging.py::TestRequestLoggingMiddleware::test_redact_headers PASSED [  5%]
tests/api/middleware/test_logging.py::TestRequestLoggingMiddleware::test_redact_params PASSED [  5%]
tests/api/middleware/test_logging.py::TestRequestLoggingMiddleware::test_should_reduce_log PASSED [  5%]
tests/api/middleware/test_logging.py::TestRequestLoggingMiddleware::test_should_skip PASSED [  5%]
tests/api/middleware/test_logging.py::TestRequestLoggingMiddleware::test_truncate_body PASSED [  5%]
tests/api/middleware/test_logging.py::TestRequestLoggingMiddlewareIntegration::test_log_error_request PASSED [  5%]
tests/api/middleware/test_logging.py::TestRequestLoggingMiddlewareIntegration::test_log_request_body PASSED [  5%]
tests/api/middleware/test_logging.py::TestRequestLoggingMiddlewareIntegration::test_log_successful_request PASSED [  5%]
tests/api/middleware/test_logging.py::TestRequestLoggingMiddlewareIntegration::test_skip_paths PASSED [  5%]
tests/api/middleware/test_profiling.py::test_profiling_middleware_normal_request PASSED [  5%]
tests/api/middleware/test_profiling.py::test_profiling_middleware_slow_request PASSED [  5%]
tests/api/middleware/test_profiling.py::test_profiling_middleware_with_profile_param PASSED [  5%]
tests/api/middleware/test_profiling.py::test_profiling_middleware_profile_param_disabled_in_prod PASSED [  5%]
tests/api/middleware/test_security_middleware.py::TestSecurityMiddleware::test_csrf_middleware_get_token PASSED [  5%]
tests/api/middleware/test_security_middleware.py::TestSecurityMiddleware::test_csrf_middleware_post_with_token PASSED [  5%]
tests/api/middleware/test_security_middleware.py::TestSecurityMiddleware::test_csrf_middleware_post_without_token PASSED [  5%]
tests/api/middleware/test_security_middleware.py::TestSecurityMiddleware::test_input_sanitization_middleware PASSED [  6%]
tests/api/middleware/test_security_middleware.py::TestSecurityMiddleware::test_ip_block_middleware PASSED [  6%]
tests/api/middleware/test_security_middleware.py::TestSecurityMiddleware::test_security_headers PASSED [  6%]
tests/api/providers/test_market_data.py::test_polygon_provider PASSED    [  6%]
tests/api/providers/test_market_data.py::test_yahoo_provider PASSED      [  6%]
tests/api/routes/test_auth_complete.py::test_register_flow PASSED        [  6%]
tests/api/routes/test_auth_complete.py::test_verify_email PASSED         [  6%]
tests/api/routes/test_auth_complete.py::test_login_flow PASSED           [  6%]
tests/api/routes/test_auth_complete.py::test_login_mfa PASSED            [  6%]
tests/api/routes/test_auth_complete.py::test_refresh_token PASSED        [  6%]
tests/api/routes/test_auth_complete.py::test_logout PASSED               [  6%]
tests/api/routes/test_auth_routes.py::test_login_success PASSED          [  6%]
tests/api/routes/test_auth_routes.py::test_register_success FAILED       [  6%]
tests/api/routes/test_auth_routes.py::test_verify_email_success FAILED   [  6%]
tests/api/routes/test_auth_routes.py::test_refresh_token_success FAILED  [  6%]
tests/api/routes/test_debug_routes.py::test_get_tracemalloc_snapshot_not_active PASSED [  6%]
tests/api/routes/test_debug_routes.py::test_get_tracemalloc_snapshot_success PASSED [  6%]
tests/api/routes/test_ml_routes.py::test_predict_success PASSED          [  6%]
tests/api/routes/test_ml_routes.py::test_predict_ml_service_error PASSED [  7%]
tests/api/routes/test_ml_routes.py::test_predict_connection_error PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_price_black_scholes PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_price_cached PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_price_heston_cached PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_price_heston_missing_symbol PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_batch_prices PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_greeks PASSED    [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_iv PASSED        [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_exotic_price_barrier PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_exotic_price_invalid_barrier_type PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_price_error_handling PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_exotic_price_asian PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_exotic_price_lookback PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_exotic_price_digital PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_price_heston_stale PASSED [  7%]
tests/api/routes/test_pricing_routes.py::test_calculate_greeks_cached PASSED [  7%]
tests/api/routes/test_system_routes.py::test_get_system_status PASSED    [  7%]
tests/api/routes/test_user_routes.py::test_get_me PASSED                 [  8%]
tests/api/routes/test_user_routes.py::test_update_me PASSED              [  8%]
tests/api/routes/test_user_routes.py::test_update_me_email_conflict PASSED [  8%]
tests/api/routes/test_user_routes.py::test_get_user_stats PASSED         [  8%]
tests/api/routes/test_user_routes.py::test_list_api_keys PASSED          [  8%]
tests/api/routes/test_user_routes.py::test_create_api_key PASSED         [  8%]
tests/api/routes/test_user_routes.py::test_revoke_api_key PASSED         [  8%]
tests/api/routes/test_user_routes.py::test_delete_me PASSED              [  8%]
tests/api/routes/test_user_routes.py::test_enterprise_get_user PASSED    [  8%]
tests/api/routes/test_user_routes.py::test_enterprise_list_users PASSED  [  8%]
tests/api/routes/test_websocket_routes.py::test_market_data_ws_connection PASSED [  8%]
tests/api/routes/test_websocket_routes.py::test_market_data_ws_protocols PASSED [  8%]
tests/api/routes/test_websocket_routes.py::test_market_data_ws_exception_handling PASSED [  8%]
tests/api/test_diagnostics_api.py::test_get_import_diagnostics PASSED    [  8%]
tests/api/test_diagnostics_api.py::test_health_check PASSED              [  8%]
tests/api/test_graphql_federation.py::test_graphql_query PASSED          [  8%]
tests/api/test_graphql_federation.py::test_graphql_mutation PASSED       [  8%]
tests/api/test_main_api.py::test_lifespan_and_startup PASSED             [  9%]
tests/api/test_main_api.py::test_root_endpoint PASSED                    [  9%]
tests/api/test_main_api.py::test_admin_only_forbidden PASSED             [  9%]
tests/api/test_main_api.py::test_admin_only_success PASSED               [  9%]
tests/api/test_main_api.py::test_http_exception_handler PASSED           [  9%]
tests/api/test_main_api.py::test_base_api_exception_handler PASSED       [  9%]
tests/api/test_main_api.py::test_instrument_requests_middleware PASSED   [  9%]
tests/api/test_main_api.py::test_get_context_testing PASSED              [  9%]
tests/api/test_main_api.py::test_get_context_production PASSED           [  9%]
tests/api/test_main_api.py::test_prometheus_dir_creation PASSED          [  9%]
tests/api/test_main_api.py::test_lifespan_shutdown_flush PASSED          [  9%]
tests/api/test_system_api.py::test_get_system_status PASSED              [  9%]
tests/api/test_websocket_manager.py::test_connection_manager_connect PASSED [  9%]
tests/api/test_websocket_manager.py::test_connection_manager_broadcast PASSED [  9%]
tests/api/test_websocket_manager.py::test_broadcast_no_connections PASSED [  9%]
tests/api/test_websocket_manager.py::test_broadcast_unknown_symbol PASSED [  9%]
tests/api/test_websocket_manager.py::test_connection_manager_disconnect PASSED [  9%]
tests/api/test_websocket_manager.py::test_disconnect_multiple_clients PASSED [  9%]
tests/api/test_websocket_manager.py::test_broadcast_with_exception PASSED [ 10%]
tests/api/websockets/test_endpoint.py::test_market_data_ws_protocol_negotiation PASSED [ 10%]
tests/api/websockets/test_endpoint.py::test_market_data_ws_default_protocol PASSED [ 10%]
tests/api/websockets/test_manager.py::test_connect_disconnect PASSED     [ 10%]
tests/api/websockets/test_manager.py::test_broadcast_mixed_protocols PASSED [ 10%]
tests/api/websockets/test_manager.py::test_broadcast_dict_input PASSED   [ 10%]
tests/api/websockets/test_manager.py::test_broadcast_encode_error PASSED [ 10%]
tests/api/websockets/test_manager.py::test_init_redis_connection PASSED  [ 10%]
tests/api/websockets/test_manager.py::test_broadcast_unknown_symbol PASSED [ 10%]
tests/api/websockets/test_manager.py::test_disconnect_unknown PASSED     [ 10%]
tests/api/websockets/test_metadata.py::test_connection_metadata_initialization PASSED [ 10%]
tests/api/websockets/test_metadata.py::test_connection_metadata_update_heartbeat PASSED [ 10%]
tests/api/websockets/test_metadata.py::test_codec_json_serialization PASSED [ 10%]
tests/api/websockets/test_metadata.py::test_codec_proto_to_json_conversion PASSED [ 10%]
tests/api/websockets/test_metadata.py::test_codec_proto_serialization PASSED [ 10%]
tests/api/websockets/test_metadata.py::test_codec_proto_invalid_input PASSED [ 10%]
tests/api/websockets/test_metadata.py::test_codec_proto_decoding_not_implemented PASSED [ 10%]
tests/api/websockets/test_metadata.py::test_codec_msgpack_serialization PASSED [ 10%]
tests/api/websockets/test_metadata.py::test_codec_invalid_protocol PASSED [ 11%]
tests/api/websockets/test_metadata.py::test_codec_decode_invalid_protocol PASSED [ 11%]
tests/audit/test_middleware.py::test_audit_middleware_calls_kafka PASSED [ 11%]
tests/audit/test_middleware.py::test_audit_middleware_exception_handling PASSED [ 11%]
tests/auth/test_api_auth.py::test_admin_only_success PASSED              [ 11%]
tests/auth/test_api_auth.py::test_admin_only_forbidden PASSED            [ 11%]
tests/auth/test_api_auth.py::test_admin_only_unauthorized PASSED         [ 11%]
tests/benchmarks/test_import_performance.py::TestImportPerformance::test_lazy_vs_eager_ml_module PASSED [ 11%]
tests/benchmarks/test_import_performance.py::TestImportPerformance::test_first_access_overhead PASSED [ 11%]
tests/benchmarks/test_import_performance.py::TestImportPerformance::test_cached_access_speed PASSED [ 11%]
tests/blockchain/test_blockchain_lazy_loading.py::TestBlockchainLazyLoading::test_blockchain_does_not_load_heavy_deps_on_import PASSED [ 11%]
tests/blockchain/test_blockchain_lazy_loading.py::TestBlockchainLazyLoading::test_blockchain_loads_dep_on_attribute_access PASSED [ 11%]
tests/blockchain/test_blockchain_lazy_loading.py::TestBlockchainLazyLoading::test_dir_returns_all_exports PASSED [ 11%]
tests/blockchain/test_defi_options.py::test_protocol_init PASSED         [ 11%]
tests/blockchain/test_defi_options.py::test_protocol_init_with_key PASSED [ 11%]
tests/blockchain/test_defi_options.py::test_get_option_price PASSED      [ 11%]
tests/blockchain/test_defi_options.py::test_buy_option_success PASSED    [ 11%]
tests/blockchain/test_defi_options.py::test_buy_option_failure PASSED    [ 12%]
tests/blockchain/test_defi_options.py::test_buy_option_no_key PASSED     [ 12%]
tests/database/test_crud_complete.py::test_create_user PASSED            [ 12%]
tests/database/test_crud_complete.py::test_get_user_by_id PASSED         [ 12%]
tests/database/test_crud_complete.py::test_get_user_by_email PASSED      [ 12%]
tests/database/test_crud_complete.py::test_get_user_with_portfolios PASSED [ 12%]
tests/database/test_crud_complete.py::test_get_active_users_by_tier PASSED [ 12%]
tests/database/test_crud_complete.py::test_update_user_last_login PASSED [ 12%]
tests/database/test_crud_complete.py::test_update_user_tier PASSED       [ 12%]
tests/database/test_crud_complete.py::test_create_portfolio PASSED       [ 12%]
tests/database/test_crud_complete.py::test_get_portfolio_by_id PASSED    [ 12%]
tests/database/test_crud_complete.py::test_get_user_portfolios PASSED    [ 12%]
tests/database/test_crud_complete.py::test_update_portfolio_cash PASSED  [ 12%]
tests/database/test_crud_complete.py::test_get_portfolio_with_open_positions PASSED [ 12%]
tests/database/test_crud_complete.py::test_create_position PASSED        [ 12%]
tests/database/test_crud_complete.py::test_get_position_by_id PASSED     [ 12%]
tests/database/test_crud_complete.py::test_get_open_positions_by_portfolio PASSED [ 12%]
tests/database/test_crud_complete.py::test_get_expiring_positions PASSED [ 12%]
tests/database/test_crud_complete.py::test_get_positions_by_symbol PASSED [ 13%]
tests/database/test_crud_complete.py::test_close_position PASSED         [ 13%]
tests/database/test_crud_complete.py::test_bulk_create_positions PASSED  [ 13%]
tests/database/test_crud_complete.py::test_create_order PASSED           [ 13%]
tests/database/test_crud_complete.py::test_get_order_by_id PASSED        [ 13%]
tests/database/test_crud_complete.py::test_get_user_orders PASSED        [ 13%]
tests/database/test_crud_complete.py::test_get_pending_orders PASSED     [ 13%]
tests/database/test_crud_complete.py::test_get_orders_by_broker PASSED   [ 13%]
tests/database/test_crud_complete.py::test_update_order_status PASSED    [ 13%]
tests/database/test_crud_complete.py::test_create_model PASSED           [ 13%]
tests/database/test_crud_complete.py::test_get_latest_model_version PASSED [ 13%]
tests/database/test_crud_complete.py::test_set_get_production_model PASSED [ 13%]
tests/database/test_crud_complete.py::test_bulk_insert_option_prices PASSED [ 13%]
tests/database/test_crud_complete.py::test_get_latest_option_price PASSED [ 13%]
tests/database/test_crud_complete.py::test_get_option_chain PASSED       [ 13%]
tests/database/test_crud_complete.py::test_get_portfolio_summary PASSED  [ 13%]
tests/database/test_crud_complete.py::test_get_user_trading_stats PASSED [ 13%]
tests/docker/test_container_security_scans_skipped.py::test_container_security_scans_skipped SKIPPED [ 14%]
tests/docker/test_docker_compose_blockchain_quantum.py::test_blockchain_quantum_configured PASSED [ 14%]
tests/docker/test_docker_compose_kafka_kraft.py::test_kafka_kraft_configured PASSED [ 14%]
tests/docker/test_docker_compose_network_isolation.py::test_docker_network_isolation_configured PASSED [ 14%]
tests/docker/test_docker_compose_ray.py::test_ray_shm_size_configured PASSED [ 14%]
tests/docker/test_dockerfile_api.py::test_dockerfile_api_non_root_user_verification_skipped SKIPPED [ 14%]
tests/docker/test_dockerfile_ci.py::test_dockerfile_ci_exists PASSED     [ 14%]
tests/docker/test_dockerfile_ci.py::test_dockerfile_ci_contents PASSED   [ 14%]
tests/docker/test_dockerfile_ci.py::test_dockerfile_ci_non_root_verification_skipped SKIPPED [ 14%]
tests/docker/test_dockerfile_ci.py::test_dockerfile_scraper_hardened PASSED [ 14%]
tests/docker/test_dockerfile_gateway.py::test_dockerfile_gateway_non_root_user_verification_skipped SKIPPED [ 14%]
tests/docker/test_dockerfile_ml.py::test_dockerfile_ml_non_root_user_verification_skipped SKIPPED [ 14%]
tests/docker/test_dockerfile_wasm.py::test_dockerfile_wasm_non_root_user_verification_skipped SKIPPED [ 14%]
tests/docker/test_performance_benchmarks_skipped.py::test_performance_benchmarks_skipped SKIPPED [ 14%]
tests/e2e/test_aiops_e2e.py::test_e2e_api_spike_remediation PASSED       [ 14%]
tests/e2e/test_aiops_e2e.py::test_e2e_ml_drift_remediation PASSED        [ 14%]
tests/functional/test_api_v1.py::test_health_check PASSED                [ 14%]
tests/functional/test_api_v1.py::test_pricing_rate_limit FAILED          [ 14%]
tests/functional/test_api_v1.py::test_error_response_format FAILED       [ 15%]
tests/functional/test_auth.py::test_register_success PASSED              [ 15%]
tests/functional/test_auth.py::test_register_duplicate_email PASSED      [ 15%]
tests/functional/test_auth.py::test_login_success PASSED                 [ 15%]
tests/functional/test_auth.py::test_login_invalid_credentials PASSED     [ 15%]
tests/functional/test_auth.py::test_protected_endpoint_unauthorized PASSED [ 15%]
tests/functional/test_auth.py::test_protected_endpoint_valid_token PASSED [ 15%]
tests/functional/test_data_loading.py::test_register_from_csv[user_data0] PASSED [ 15%]
tests/functional/test_data_loading.py::test_register_from_json[user_data0] PASSED [ 15%]
tests/functional/test_data_loading.py::test_register_from_json[user_data1] PASSED [ 15%]
tests/functional/test_data_loading.py::test_register_from_yaml[user_data0] PASSED [ 15%]
tests/functional/test_data_loading.py::test_register_from_yaml[user_data1] PASSED [ 15%]
tests/functional/test_edge_cases.py::test_register_null_fields PASSED    [ 15%]
tests/functional/test_edge_cases.py::test_register_empty_strings PASSED  [ 15%]
tests/functional/test_edge_cases.py::test_pricing_large_inputs PASSED    [ 15%]
tests/functional/test_edge_cases.py::test_pricing_empty_payload PASSED   [ 15%]
tests/functional/test_edge_cases.py::test_register_missing_fields PASSED [ 15%]
tests/functional/test_edge_cases.py::test_register_duplicate_entries PASSED [ 15%]
tests/functional/test_edge_cases.py::test_pricing_maximum_values PASSED  [ 16%]
tests/functional/test_edge_cases.py::test_register_special_characters PASSED [ 16%]
tests/functional/test_edge_cases.py::test_pricing_out_of_bounds_rejection PASSED [ 16%]
tests/functional/test_headers.py::test_header_content_type_json PASSED   [ 16%]
tests/functional/test_headers.py::test_header_security_and_server_info PASSED [ 16%]
tests/functional/test_headers.py::test_no_sensitive_cookies_set PASSED   [ 16%]
tests/functional/test_performance.py::test_pricing_latency FAILED        [ 16%]
tests/functional/test_performance.py::test_pricing_throughput PASSED     [ 16%]
tests/functional/test_pricing.py::test_pricing_valid_request FAILED      [ 16%]
tests/functional/test_pricing.py::test_pricing_invalid_payload PASSED    [ 16%]
tests/functional/test_security_functional.py::test_security_sql_injection_on_user_id PASSED [ 16%]
tests/functional/test_security_functional.py::test_security_xss_protection PASSED [ 16%]
tests/functional/test_security_functional.py::test_security_headers_present PASSED [ 16%]
tests/functional/test_security_functional.py::test_security_cors_configuration PASSED [ 16%]
tests/functional/test_security_functional.py::test_security_rate_limiting PASSED [ 16%]
tests/functional/test_security_functional.py::test_security_authentication_bypass PASSED [ 16%]
tests/functional/test_security_functional.py::test_security_idor_profile_access PASSED [ 16%]
tests/infra/test_app_pipeline_workflow.py::test_app_pipeline_workflow_exists PASSED [ 17%]
tests/infra/test_app_pipeline_workflow.py::test_app_pipeline_workflow_contents PASSED [ 17%]
tests/infra/test_app_pipeline_workflow.py::test_app_pipeline_matrix_build PASSED [ 17%]
tests/infra/test_app_pipeline_workflow.py::test_app_pipeline_gitops_update PASSED [ 17%]
tests/infra/test_app_pipeline_workflow.py::test_infrastructure_manifests_exist PASSED [ 17%]
tests/infra/test_app_pipeline_workflow.py::test_argocd_canary_manifests_exist PASSED [ 17%]
tests/infra/test_docker_optimization.py::test_neural_pricing_resource_pinning PASSED [ 17%]
tests/infra/test_docker_optimization.py::test_neural_pricing_thread_concurrency PASSED [ 17%]
tests/infra/test_docker_optimization.py::test_model_quantization_env PASSED [ 17%]
tests/infra/test_kernel_limits.py::test_file_max_limit PASSED            [ 17%]
tests/infra/test_kernel_limits.py::test_tcp_tw_reuse PASSED              [ 17%]
tests/infra/test_kernel_limits.py::test_somaxconn PASSED                 [ 17%]
tests/infra/test_kernel_limits.py::test_ulimit_nofile PASSED             [ 17%]
tests/infra/test_nginx_config.py::test_nginx_config_syntax PASSED        [ 17%]
tests/infra/test_nginx_config.py::test_nginx_performance_settings PASSED [ 17%]
tests/infra/test_nginx_config.py::test_websocket_optimizations FAILED    [ 17%]
tests/infra/test_pipeline_observability.py::test_github_exporter_in_docker_compose PASSED [ 17%]
tests/infra/test_pipeline_observability.py::test_prometheus_scrapes_github_exporter PASSED [ 17%]
tests/infra/test_pipeline_observability.py::test_grafana_pipeline_dashboard_exists FAILED [ 18%]
tests/integration/database/test_market_mesh_schema.py::test_market_data_mesh_table_exists FAILED [ 18%]
tests/integration/database/test_market_mesh_schema.py::test_market_data_mesh_columns FAILED [ 18%]
tests/integration/infra/test_docker_config_integration.py::test_docker_neural_pricing_optimization PASSED [ 18%]
tests/integration/ml/test_sentiment_pipeline.py::test_sentiment_ingestor_process_message PASSED [ 18%]
tests/integration/ml/test_sentiment_pipeline.py::test_process_empty_message PASSED [ 18%]
tests/integration/ml/test_sentiment_pipeline.py::test_process_invalid_json PASSED [ 18%]
tests/integration/ml/test_sentiment_pipeline.py::test_sentiment_ingestor_run_loop PASSED [ 18%]
tests/integration/ml/test_sentiment_pipeline.py::test_sentiment_ingestor_run_kafka_error PASSED [ 18%]
tests/integration/workers/test_math_worker.py::TestMathWorkerIntegration::test_recalibrate_symbol_flow PASSED [ 18%]
tests/ml/test_anomaly_detection.py::test_isolation_forest_detector_init PASSED [ 18%]
tests/ml/test_anomaly_detection.py::test_isolation_forest_detector_fit_predict_univariate PASSED [ 18%]
tests/ml/test_anomaly_detection.py::test_isolation_forest_detector_no_outliers PASSED [ 18%]
tests/ml/test_anomaly_detection.py::test_isolation_forest_detector_empty_data PASSED [ 18%]
tests/ml/test_anomaly_detection.py::test_isolation_forest_detector_fit_predict_series_data PASSED [ 18%]
tests/ml/test_anomaly_detection.py::test_isolation_forest_detector_not_fitted_predict_raises_error PASSED [ 18%]
tests/ml/test_anomaly_detection.py::test_isolation_forest_detector_invalid_contamination PASSED [ 18%]
tests/ml/test_anomaly_detection.py::test_isolation_forest_detector_fit_predict_1d_data PASSED [ 18%]
tests/ml/test_anomaly_detection.py::test_isolation_forest_detector_predict_1d_data PASSED [ 19%]
tests/ml/test_augmented_agent.py::test_augmented_agent_initialization PASSED [ 19%]
tests/ml/test_augmented_agent.py::test_observation_concatenation PASSED  [ 19%]
tests/ml/test_augmented_agent.py::test_agent_act_no_model PASSED         [ 19%]
tests/ml/test_augmented_agent.py::test_agent_act_with_augmented_state PASSED [ 19%]
tests/ml/test_autoencoder_anomaly_detection.py::test_autoencoder_detector_init PASSED [ 19%]
tests/ml/test_autoencoder_anomaly_detection.py::test_autoencoder_detector_fit_predict_multivariate PASSED [ 19%]
tests/ml/test_autoencoder_anomaly_detection.py::test_autoencoder_detector_empty_data PASSED [ 19%]
tests/ml/test_autoencoder_anomaly_detection.py::test_autoencoder_detector_not_fitted_predict_raises_error PASSED [ 19%]
tests/ml/test_autoencoder_anomaly_detection.py::test_autoencoder_detector_predict_multivariate PASSED [ 19%]
tests/ml/test_autonomous_pipeline.py::test_pipeline_run PASSED           [ 19%]
tests/ml/test_autonomous_pipeline.py::test_pipeline_scrape_retry PASSED  [ 19%]
tests/ml/test_autonomous_pipeline.py::test_pipeline_failure PASSED       [ 19%]
tests/ml/test_autonomous_pipeline.py::test_objective_function PASSED     [ 19%]
tests/ml/test_autonomous_pipeline.py::test_pytorch_framework PASSED      [ 19%]
tests/ml/test_celery.py::test_run_pipeline_task_success PASSED           [ 19%]
tests/ml/test_celery.py::test_run_pipeline_task_failure PASSED           [ 19%]
tests/ml/test_data_drift_detector.py::test_data_drift_detector_init PASSED [ 20%]
tests/ml/test_data_drift_detector.py::test_data_drift_detector_no_drift PASSED [ 20%]
tests/ml/test_data_drift_detector.py::test_data_drift_detector_psi_drift_detected PASSED [ 20%]
tests/ml/test_data_drift_detector.py::test_data_drift_detector_ks_drift_detected PASSED [ 20%]
tests/ml/test_data_drift_detector.py::test_data_drift_detector_empty_data_raises_error PASSED [ 20%]
tests/ml/test_data_drift_detector.py::test_data_drift_detector_unequal_dimensions_raises_error PASSED [ 20%]
tests/ml/test_data_drift_detector.py::test_data_drift_detector_multivariate_detection PASSED [ 20%]
tests/ml/test_db.py::test_market_data_model PASSED                       [ 20%]
tests/ml/test_db.py::test_db_connection PASSED                           [ 20%]
tests/ml/test_db.py::test_minio_storage PASSED                           [ 20%]
tests/ml/test_db_schema_tft.py::test_market_data_symbol_tagging PASSED   [ 20%]
tests/ml/test_db_schema_tft.py::test_timescaledb_hypertable_status_mocked PASSED [ 20%]
tests/ml/test_distributed_trainer.py::test_train_distributed_success PASSED [ 20%]
tests/ml/test_distributed_trainer.py::test_distributed_trainer_selects_best PASSED [ 20%]
tests/ml/test_drift.py::test_ks_test_instrumentation PASSED              [ 20%]
tests/ml/test_drift.py::test_calculate_ks_test_no_drift PASSED           [ 20%]
tests/ml/test_drift.py::test_calculate_ks_test_significant_drift PASSED  [ 20%]
tests/ml/test_drift.py::test_drift_instrumentation PASSED                [ 20%]
tests/ml/test_drift.py::test_calculate_psi_no_drift PASSED               [ 21%]
tests/ml/test_drift.py::test_calculate_psi_significant_drift PASSED      [ 21%]
tests/ml/test_drift.py::test_calculate_psi_zero_bin_handling PASSED      [ 21%]
tests/ml/test_drift.py::test_performance_drift_monitor PASSED            [ 21%]
tests/ml/test_drift.py::test_performance_drift_alert_instrumentation PASSED [ 21%]
tests/ml/test_drift.py::test_performance_drift_insufficient_history PASSED [ 21%]
tests/ml/test_environment.py::test_src_directories_exist PASSED          [ 21%]
tests/ml/test_environment.py::test_tests_directory_exists PASSED         [ 21%]
tests/ml/test_environment.py::test_dependencies_installed[numpy] PASSED  [ 21%]
tests/ml/test_environment.py::test_dependencies_installed[pandas] PASSED [ 21%]
tests/ml/test_environment.py::test_dependencies_installed[xgboost] PASSED [ 21%]
tests/ml/test_environment.py::test_dependencies_installed[optuna] PASSED [ 21%]
tests/ml/test_environment.py::test_dependencies_installed[mlflow] PASSED [ 21%]
tests/ml/test_environment.py::test_dependencies_installed[prometheus_client] PASSED [ 21%]
tests/ml/test_environment.py::test_dependencies_installed[structlog] PASSED [ 21%]
tests/ml/test_environment.py::test_dependencies_installed[sklearn] PASSED [ 21%]
tests/ml/test_federated_learning.py::test_coordinator_initialization PASSED [ 21%]
tests/ml/test_federated_learning.py::test_coordinator_start_server PASSED [ 21%]
tests/ml/test_instrumentation.py::test_trainer_new_prometheus_metrics PASSED [ 22%]
tests/ml/test_instrumentation.py::test_trainer_error_metrics PASSED      [ 22%]
tests/ml/test_instrumentation.py::test_structlog_configuration PASSED    [ 22%]
tests/ml/test_instrumentation.py::test_pipeline_scrape_execution PASSED  [ 22%]
tests/ml/test_integration.py::test_pipeline_run PASSED                   [ 22%]
tests/ml/test_ml_lazy_loading.py::test_ml_does_not_load_heavy_deps_on_import SKIPPED [ 22%]
tests/ml/test_ml_lazy_loading.py::test_ml_loads_dep_on_attribute_access PASSED [ 22%]
tests/ml/test_mlops_training_workflow.py::test_mlops_training_workflow_exists PASSED [ 22%]
tests/ml/test_mlops_training_workflow.py::test_mlops_training_workflow_contents PASSED [ 22%]
tests/ml/test_model_promotion.py::test_compare_models_script_exists PASSED [ 22%]
tests/ml/test_model_promotion.py::test_promote_script_exists PASSED      [ 22%]
tests/ml/test_model_promotion.py::test_model_promotion_logic PASSED      [ 22%]
tests/ml/test_observability.py::test_setup_logging_json PASSED           [ 22%]
tests/ml/test_observability.py::test_metrics_definitions PASSED          [ 22%]
tests/ml/test_observability_configs.py::test_prometheus_rules_valid_yaml PASSED [ 22%]
tests/ml/test_observability_configs.py::test_grafana_dashboard_valid_json PASSED [ 22%]
tests/ml/test_online_agent.py::test_init PASSED                          [ 22%]
tests/ml/test_online_agent.py::test_get_state_vector PASSED              [ 23%]
tests/ml/test_online_agent.py::test_process_market_data PASSED           [ 23%]
tests/ml/test_online_agent.py::test_process_market_data_no_model PASSED  [ 23%]
tests/ml/test_online_agent.py::test_run_loop PASSED                      [ 23%]
tests/ml/test_online_agent.py::test_produce_signal_failed PASSED         [ 23%]
tests/ml/test_online_agent.py::test_flush_experience PASSED              [ 23%]
tests/ml/test_online_agent.py::test_init_without_kafka_libs PASSED       [ 23%]
tests/ml/test_ray_scaling.py::test_ray_import PASSED                     [ 23%]
tests/ml/test_ray_scaling.py::test_sb3_import PASSED                     [ 23%]
tests/ml/test_ray_scaling.py::test_gymnasium_import PASSED               [ 23%]
tests/ml/test_ray_scaling.py::test_ray_distributed_execution PASSED      [ 23%]
tests/ml/test_retraining_dag.py::test_neural_greeks_flow_execution PASSED [ 23%]
tests/ml/test_retraining_dag.py::test_dag_structure PASSED               [ 23%]
tests/ml/test_scraper.py::test_fetch_historical_data_success PASSED      [ 23%]
tests/ml/test_scraper.py::test_fetch_historical_data_retry_logic PASSED  [ 23%]
tests/ml/test_scraper.py::test_fetch_historical_data_failure PASSED      [ 23%]
tests/ml/test_scraper.py::test_fetch_historical_data_polygon_success PASSED [ 23%]
tests/ml/test_scraper.py::test_fetch_historical_data_auto_provider PASSED [ 23%]
tests/ml/test_scraper.py::test_scraper_redact_api_key PASSED             [ 24%]
tests/ml/test_scraper.py::test_scraper_invalid_ticker PASSED             [ 24%]
tests/ml/test_sentiment_extractor.py::test_sentiment_extractor_initialization PASSED [ 24%]
tests/ml/test_sentiment_extractor.py::test_extract_sentiment_score PASSED [ 24%]
tests/ml/test_sentiment_extractor.py::test_sentiment_extractor_load_failure PASSED [ 24%]
tests/ml/test_sentiment_extractor.py::test_extract_sentiment_batch PASSED [ 24%]
tests/ml/test_sentiment_integration.py::test_sentiment_pipeline_processing PASSED [ 24%]
tests/ml/test_sentiment_integration.py::test_sentiment_pipeline_empty_text PASSED [ 24%]
tests/ml/test_sentiment_integration.py::test_sentiment_pipeline_error_handling PASSED [ 24%]
tests/ml/test_sentiment_integration.py::test_sentiment_pipeline_initialization PASSED [ 24%]
tests/ml/test_tft_model.py::test_tft_model_initialization PASSED         [ 24%]
tests/ml/test_tft_model.py::test_prepare_data_logic PASSED               [ 24%]
tests/ml/test_tft_model.py::test_tft_model_train PASSED                  [ 24%]
tests/ml/test_tft_model.py::test_tft_model_predict PASSED                [ 24%]
tests/ml/test_tft_model.py::test_get_interpretability_report_trained PASSED [ 24%]
tests/ml/test_tft_model.py::test_tft_model_invalid_data PASSED           [ 24%]
tests/ml/test_tft_model.py::test_tft_model_predict_not_trained PASSED    [ 24%]
tests/ml/test_tft_model.py::test_get_interpretability_report_not_trained PASSED [ 25%]
tests/ml/test_tft_model.py::test_prepare_data_with_volume PASSED         [ 25%]
tests/ml/test_trading_env.py::test_trading_env_initialization PASSED     [ 25%]
tests/ml/test_trading_env.py::test_trading_env_reset PASSED              [ 25%]
tests/ml/test_trading_env.py::test_trading_env_step PASSED               [ 25%]
tests/ml/test_trading_env.py::test_trading_env_drawdown_truncation PASSED [ 25%]
tests/ml/test_trading_env_advanced.py::test_reward_function_risk_awareness PASSED [ 25%]
tests/ml/test_trading_env_advanced.py::test_transaction_cost_deduction PASSED [ 25%]
tests/ml/test_trading_env_advanced.py::test_action_clipping PASSED       [ 25%]
tests/ml/test_train.py::test_train_td3_initialization PASSED             [ 25%]
tests/ml/test_train.py::test_train_distributed_function PASSED           [ 25%]
tests/ml/test_train.py::test_train_td3_logs_params PASSED                [ 25%]
tests/ml/test_train.py::test_train_td3_logs_model PASSED                 [ 25%]
tests/ml/test_train.py::test_main_function PASSED                        [ 25%]
tests/ml/test_train.py::test_mlflow_callback PASSED                      [ 25%]
tests/ml/test_train.py::test_train_distributed_ray_not_available PASSED  [ 25%]
tests/ml/test_train.py::test_main_function_distributed PASSED            [ 25%]
tests/ml/test_trainer.py::test_trainer_initialization PASSED             [ 25%]
tests/ml/test_trainer.py::test_trainer_train_xgboost PASSED              [ 26%]
tests/ml/test_trainer.py::test_trainer_logging PASSED                    [ 26%]
tests/ml/test_trainer.py::test_trainer_prometheus_metrics_usage 