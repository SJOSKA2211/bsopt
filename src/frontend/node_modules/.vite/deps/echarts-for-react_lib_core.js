import { i as __toCommonJS, t as __commonJS } from "./chunk-C3fVp-vY.js";
import { t as require_react } from "./react-_5tUDofn.js";
import { n as init_tslib_es6, r as tslib_es6_exports } from "./tslib.es6-BMefx2Ih.js";

//#region node_modules/size-sensor/lib/id.js
var require_id = /* @__PURE__ */ __commonJS({ "node_modules/size-sensor/lib/id.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports["default"] = void 0;
	/**
	* Created by hustcc on 18/6/9.
	* Contract: i@hust.cc
	*/
	var id = 1;
	exports["default"] = function _default() {
		return "".concat(id++);
	};
}) });

//#endregion
//#region node_modules/size-sensor/lib/debounce.js
var require_debounce = /* @__PURE__ */ __commonJS({ "node_modules/size-sensor/lib/debounce.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports["default"] = void 0;
	exports["default"] = function _default(fn) {
		var delay = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 60;
		var timer = null;
		return function() {
			var _this = this;
			for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) args[_key] = arguments[_key];
			clearTimeout(timer);
			timer = setTimeout(function() {
				fn.apply(_this, args);
			}, delay);
		};
	};
}) });

//#endregion
//#region node_modules/size-sensor/lib/constant.js
var require_constant = /* @__PURE__ */ __commonJS({ "node_modules/size-sensor/lib/constant.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.SizeSensorId = exports.SensorTabIndex = exports.SensorClassName = void 0;
	exports.SizeSensorId = "size-sensor-id";
	exports.SensorClassName = "size-sensor-object";
	exports.SensorTabIndex = "-1";
}) });

//#endregion
//#region node_modules/size-sensor/lib/sensors/object.js
var require_object = /* @__PURE__ */ __commonJS({ "node_modules/size-sensor/lib/sensors/object.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.createSensor = void 0;
	var _debounce$1 = _interopRequireDefault$2(require_debounce());
	var _constant$2 = require_constant();
	function _interopRequireDefault$2(e) {
		return e && e.__esModule ? e : { "default": e };
	}
	exports.createSensor = function createSensor(element, whenDestroy) {
		var sensor = void 0;
		var listeners = [];
		/**
		* create object DOM of sensor
		* @returns {HTMLObjectElement}
		*/
		var newSensor = function newSensor$1() {
			if (getComputedStyle(element).position === "static") element.style.position = "relative";
			var obj = document.createElement("object");
			obj.onload = function() {
				obj.contentDocument.defaultView.addEventListener("resize", resizeListener);
				resizeListener();
			};
			obj.style.display = "block";
			obj.style.position = "absolute";
			obj.style.top = "0";
			obj.style.left = "0";
			obj.style.height = "100%";
			obj.style.width = "100%";
			obj.style.overflow = "hidden";
			obj.style.pointerEvents = "none";
			obj.style.zIndex = "-1";
			obj.style.opacity = "0";
			obj.setAttribute("class", _constant$2.SensorClassName);
			obj.setAttribute("tabindex", _constant$2.SensorTabIndex);
			obj.type = "text/html";
			element.appendChild(obj);
			obj.data = "about:blank";
			return obj;
		};
		/**
		* trigger listeners
		*/
		var resizeListener = (0, _debounce$1["default"])(function() {
			listeners.forEach(function(listener) {
				listener(element);
			});
		});
		/**
		* listen with one callback function
		* @param cb
		*/
		var bind = function bind$1(cb) {
			if (!sensor) sensor = newSensor();
			if (listeners.indexOf(cb) === -1) listeners.push(cb);
		};
		/**
		* destroy all
		*/
		var destroy = function destroy$1() {
			if (sensor && sensor.parentNode) {
				if (sensor.contentDocument) sensor.contentDocument.defaultView.removeEventListener("resize", resizeListener);
				sensor.parentNode.removeChild(sensor);
				element.removeAttribute(_constant$2.SizeSensorId);
				sensor = void 0;
				listeners = [];
				whenDestroy && whenDestroy();
			}
		};
		return {
			element,
			bind,
			destroy,
			unbind: function unbind(cb) {
				var idx = listeners.indexOf(cb);
				if (idx !== -1) listeners.splice(idx, 1);
				if (listeners.length === 0 && sensor) destroy();
			}
		};
	};
}) });

//#endregion
//#region node_modules/size-sensor/lib/sensors/resizeObserver.js
var require_resizeObserver = /* @__PURE__ */ __commonJS({ "node_modules/size-sensor/lib/sensors/resizeObserver.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.createSensor = void 0;
	var _constant$1 = require_constant();
	var _debounce = _interopRequireDefault$1(require_debounce());
	function _interopRequireDefault$1(e) {
		return e && e.__esModule ? e : { "default": e };
	}
	exports.createSensor = function createSensor(element, whenDestroy) {
		var sensor = void 0;
		var listeners = [];
		/**
		* trigger listeners
		*/
		var resizeListener = (0, _debounce["default"])(function() {
			listeners.forEach(function(listener) {
				listener(element);
			});
		});
		/**
		* create ResizeObserver sensor
		* @returns
		*/
		var newSensor = function newSensor$1() {
			var s = new ResizeObserver(resizeListener);
			s.observe(element);
			resizeListener();
			return s;
		};
		/**
		* listen with callback
		* @param cb
		*/
		var bind = function bind$1(cb) {
			if (!sensor) sensor = newSensor();
			if (listeners.indexOf(cb) === -1) listeners.push(cb);
		};
		/**
		* destroy
		*/
		var destroy = function destroy$1() {
			if (sensor) sensor.disconnect();
			listeners = [];
			sensor = void 0;
			element.removeAttribute(_constant$1.SizeSensorId);
			whenDestroy && whenDestroy();
		};
		return {
			element,
			bind,
			destroy,
			unbind: function unbind(cb) {
				var idx = listeners.indexOf(cb);
				if (idx !== -1) listeners.splice(idx, 1);
				if (listeners.length === 0 && sensor) destroy();
			}
		};
	};
}) });

//#endregion
//#region node_modules/size-sensor/lib/sensors/index.js
var require_sensors = /* @__PURE__ */ __commonJS({ "node_modules/size-sensor/lib/sensors/index.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.createSensor = void 0;
	var _object = require_object();
	var _resizeObserver = require_resizeObserver();
	exports.createSensor = typeof ResizeObserver !== "undefined" ? _resizeObserver.createSensor : _object.createSensor;
}) });

//#endregion
//#region node_modules/size-sensor/lib/sensorPool.js
var require_sensorPool = /* @__PURE__ */ __commonJS({ "node_modules/size-sensor/lib/sensorPool.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.removeSensor = exports.getSensor = exports.Sensors = void 0;
	var _id = _interopRequireDefault(require_id());
	var _sensors = require_sensors();
	var _constant = require_constant();
	function _interopRequireDefault(e) {
		return e && e.__esModule ? e : { "default": e };
	}
	/**
	* Created by hustcc on 18/6/9.
	* Contract: i@hust.cc
	*/
	/**
	* all the sensor objects.
	* sensor pool
	*/
	var Sensors = exports.Sensors = {};
	/**
	* When destroy the sensor, remove it from the pool
	*/
	function clean(sensorId) {
		if (sensorId && Sensors[sensorId]) delete Sensors[sensorId];
	}
	exports.getSensor = function getSensor(element) {
		var sensorId = element.getAttribute(_constant.SizeSensorId);
		if (sensorId && Sensors[sensorId]) return Sensors[sensorId];
		var newId = (0, _id["default"])();
		element.setAttribute(_constant.SizeSensorId, newId);
		var sensor = (0, _sensors.createSensor)(element, function() {
			return clean(newId);
		});
		Sensors[newId] = sensor;
		return sensor;
	};
	exports.removeSensor = function removeSensor(sensor) {
		var sensorId = sensor.element.getAttribute(_constant.SizeSensorId);
		sensor.destroy();
		clean(sensorId);
	};
}) });

//#endregion
//#region node_modules/size-sensor/lib/index.js
var require_lib = /* @__PURE__ */ __commonJS({ "node_modules/size-sensor/lib/index.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.ver = exports.clear = exports.bind = void 0;
	var _sensorPool = require_sensorPool();
	exports.bind = function bind(element, cb) {
		var sensor = (0, _sensorPool.getSensor)(element);
		sensor.bind(cb);
		return function() {
			sensor.unbind(cb);
		};
	};
	exports.clear = function clear(element) {
		var sensor = (0, _sensorPool.getSensor)(element);
		(0, _sensorPool.removeSensor)(sensor);
	};
	exports.ver = "1.0.3";
}) });

//#endregion
//#region node_modules/echarts-for-react/lib/helper/pick.js
var require_pick = /* @__PURE__ */ __commonJS({ "node_modules/echarts-for-react/lib/helper/pick.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.pick = void 0;
	/**
	* 保留 object 中的部分内容
	* @param obj
	* @param keys
	*/
	function pick(obj, keys) {
		var r = {};
		keys.forEach(function(key) {
			r[key] = obj[key];
		});
		return r;
	}
	exports.pick = pick;
}) });

//#endregion
//#region node_modules/echarts-for-react/lib/helper/is-function.js
var require_is_function = /* @__PURE__ */ __commonJS({ "node_modules/echarts-for-react/lib/helper/is-function.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.isFunction = void 0;
	function isFunction(v) {
		return typeof v === "function";
	}
	exports.isFunction = isFunction;
}) });

//#endregion
//#region node_modules/echarts-for-react/lib/helper/is-string.js
var require_is_string = /* @__PURE__ */ __commonJS({ "node_modules/echarts-for-react/lib/helper/is-string.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.isString = void 0;
	function isString(v) {
		return typeof v === "string";
	}
	exports.isString = isString;
}) });

//#endregion
//#region node_modules/fast-deep-equal/index.js
var require_fast_deep_equal = /* @__PURE__ */ __commonJS({ "node_modules/fast-deep-equal/index.js": ((exports, module) => {
	module.exports = function equal(a, b) {
		if (a === b) return true;
		if (a && b && typeof a == "object" && typeof b == "object") {
			if (a.constructor !== b.constructor) return false;
			var length, i, keys;
			if (Array.isArray(a)) {
				length = a.length;
				if (length != b.length) return false;
				for (i = length; i-- !== 0;) if (!equal(a[i], b[i])) return false;
				return true;
			}
			if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;
			if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();
			if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();
			keys = Object.keys(a);
			length = keys.length;
			if (length !== Object.keys(b).length) return false;
			for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;
			for (i = length; i-- !== 0;) {
				var key = keys[i];
				if (!equal(a[key], b[key])) return false;
			}
			return true;
		}
		return a !== a && b !== b;
	};
}) });

//#endregion
//#region node_modules/echarts-for-react/lib/helper/is-equal.js
var require_is_equal = /* @__PURE__ */ __commonJS({ "node_modules/echarts-for-react/lib/helper/is-equal.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	exports.isEqual = void 0;
	var fast_deep_equal_1 = (init_tslib_es6(), __toCommonJS(tslib_es6_exports)).__importDefault(require_fast_deep_equal());
	exports.isEqual = fast_deep_equal_1.default;
}) });

//#endregion
//#region node_modules/echarts-for-react/lib/core.js
var require_core = /* @__PURE__ */ __commonJS({ "node_modules/echarts-for-react/lib/core.js": ((exports) => {
	Object.defineProperty(exports, "__esModule", { value: true });
	var tslib_1 = (init_tslib_es6(), __toCommonJS(tslib_es6_exports));
	var react_1 = tslib_1.__importStar(require_react());
	var size_sensor_1 = require_lib();
	var pick_1 = require_pick();
	var is_function_1 = require_is_function();
	var is_string_1 = require_is_string();
	var is_equal_1 = require_is_equal();
	/**
	* core component for echarts binding
	*/
	var EChartsReactCore = function(_super) {
		tslib_1.__extends(EChartsReactCore$1, _super);
		function EChartsReactCore$1(props) {
			var _this = _super.call(this, props) || this;
			_this.echarts = props.echarts;
			_this.ele = null;
			_this.isInitialResize = true;
			_this.eventHandlerRefs = {};
			return _this;
		}
		EChartsReactCore$1.prototype.componentDidMount = function() {
			this.renderNewEcharts();
		};
		EChartsReactCore$1.prototype.componentDidUpdate = function(prevProps) {
			/**
			* if shouldSetOption return false, then return, not update echarts options
			* default is true
			*/
			var shouldSetOption = this.props.shouldSetOption;
			if ((0, is_function_1.isFunction)(shouldSetOption) && !shouldSetOption(prevProps, this.props)) return;
			if (!(0, is_equal_1.isEqual)(prevProps.theme, this.props.theme) || !(0, is_equal_1.isEqual)(prevProps.opts, this.props.opts)) {
				this.dispose();
				this.renderNewEcharts();
				return;
			}
			var echartsInstance = this.getEchartsInstance();
			if (!(0, is_equal_1.isEqual)(prevProps.onEvents, this.props.onEvents)) {
				this.unbindEvents(echartsInstance);
				this.bindEvents(echartsInstance, this.props.onEvents);
			}
			var pickKeys = [
				"option",
				"notMerge",
				"replaceMerge",
				"lazyUpdate",
				"showLoading",
				"loadingOption"
			];
			if (!(0, is_equal_1.isEqual)((0, pick_1.pick)(this.props, pickKeys), (0, pick_1.pick)(prevProps, pickKeys))) this.updateEChartsOption();
			/**
			* when style or class name updated, change size.
			*/
			if (!(0, is_equal_1.isEqual)(prevProps.style, this.props.style) || !(0, is_equal_1.isEqual)(prevProps.className, this.props.className)) this.resize();
		};
		EChartsReactCore$1.prototype.componentWillUnmount = function() {
			this.dispose();
		};
		EChartsReactCore$1.prototype.initEchartsInstance = function() {
			return tslib_1.__awaiter(this, void 0, void 0, function() {
				var _this = this;
				return tslib_1.__generator(this, function(_a) {
					return [2, new Promise(function(resolve) {
						_this.echarts.init(_this.ele, _this.props.theme, _this.props.opts);
						_this.getEchartsInstance().on("finished", function() {
							var width = _this.ele.clientWidth;
							var height = _this.ele.clientHeight;
							_this.echarts.dispose(_this.ele);
							var opts = tslib_1.__assign({
								width,
								height
							}, _this.props.opts);
							resolve(_this.echarts.init(_this.ele, _this.props.theme, opts));
						});
					})];
				});
			});
		};
		/**
		* return the existing echart object
		*/
		EChartsReactCore$1.prototype.getEchartsInstance = function() {
			return this.echarts.getInstanceByDom(this.ele);
		};
		/**
		* dispose echarts and clear size-sensor
		*/
		EChartsReactCore$1.prototype.dispose = function() {
			if (this.ele) {
				try {
					(0, size_sensor_1.clear)(this.ele);
				} catch (e) {
					console.warn(e);
				}
				this.echarts.dispose(this.ele);
			}
		};
		/**
		* render a new echarts instance
		*/
		EChartsReactCore$1.prototype.renderNewEcharts = function() {
			return tslib_1.__awaiter(this, void 0, void 0, function() {
				var _a, onEvents, onChartReady, _b, autoResize, echartsInstance;
				var _this = this;
				return tslib_1.__generator(this, function(_c) {
					switch (_c.label) {
						case 0:
							_a = this.props, onEvents = _a.onEvents, onChartReady = _a.onChartReady, _b = _a.autoResize, autoResize = _b === void 0 ? true : _b;
							return [4, this.initEchartsInstance()];
						case 1:
							_c.sent();
							echartsInstance = this.updateEChartsOption();
							this.bindEvents(echartsInstance, onEvents || {});
							if ((0, is_function_1.isFunction)(onChartReady)) onChartReady(echartsInstance);
							if (this.ele && autoResize) (0, size_sensor_1.bind)(this.ele, function() {
								_this.resize();
							});
							return [2];
					}
				});
			});
		};
		EChartsReactCore$1.prototype.bindEvents = function(instance, events) {
			var _this = this;
			var _bindEvent = function(eventName$1, func) {
				if ((0, is_string_1.isString)(eventName$1) && (0, is_function_1.isFunction)(func)) {
					var handler = function(param) {
						func(param, instance);
					};
					instance.on(eventName$1, handler);
					_this.eventHandlerRefs[eventName$1] = handler;
				}
			};
			for (var eventName in events) if (Object.prototype.hasOwnProperty.call(events, eventName)) _bindEvent(eventName, events[eventName]);
		};
		/**
		* Unbind all currently bound event handlers. Importantly, this does not
		* unbind the `"finished"` event that is used for chart initialization.
		*/
		EChartsReactCore$1.prototype.unbindEvents = function(instance) {
			for (var _i = 0, _a = Object.entries(this.eventHandlerRefs); _i < _a.length; _i++) {
				var _b = _a[_i], eventName = _b[0], listener = _b[1];
				instance.off(eventName, listener);
			}
			this.eventHandlerRefs = {};
		};
		/**
		* render the echarts
		*/
		EChartsReactCore$1.prototype.updateEChartsOption = function() {
			var _a = this.props, option = _a.option, _b = _a.notMerge, notMerge = _b === void 0 ? false : _b, _c = _a.replaceMerge, replaceMerge = _c === void 0 ? null : _c, _d = _a.lazyUpdate, lazyUpdate = _d === void 0 ? false : _d, showLoading = _a.showLoading, _e = _a.loadingOption, loadingOption = _e === void 0 ? null : _e;
			var echartInstance = this.getEchartsInstance();
			echartInstance.setOption(option, {
				notMerge,
				replaceMerge,
				lazyUpdate
			});
			if (showLoading) echartInstance.showLoading(loadingOption);
			else echartInstance.hideLoading();
			return echartInstance;
		};
		/**
		* resize wrapper
		*/
		EChartsReactCore$1.prototype.resize = function() {
			var echartsInstance = this.getEchartsInstance();
			if (!this.isInitialResize) try {
				echartsInstance.resize({
					width: "auto",
					height: "auto"
				});
			} catch (e) {
				console.warn(e);
			}
			this.isInitialResize = false;
		};
		EChartsReactCore$1.prototype.render = function() {
			var _this = this, _a = this.props, style = _a.style, _b = _a.className, className = _b === void 0 ? "" : _b;
			_a.echarts;
			_a.option;
			_a.theme;
			_a.notMerge;
			_a.replaceMerge;
			_a.lazyUpdate;
			_a.showLoading;
			_a.loadingOption;
			_a.opts;
			_a.onChartReady;
			_a.onEvents;
			_a.shouldSetOption;
			_a.autoResize;
			var divHTMLAttributes = tslib_1.__rest(_a, [
				"style",
				"className",
				"echarts",
				"option",
				"theme",
				"notMerge",
				"replaceMerge",
				"lazyUpdate",
				"showLoading",
				"loadingOption",
				"opts",
				"onChartReady",
				"onEvents",
				"shouldSetOption",
				"autoResize"
			]);
			var newStyle = tslib_1.__assign({ height: 300 }, style);
			return react_1.default.createElement("div", tslib_1.__assign({
				ref: function(e) {
					_this.ele = e;
				},
				style: newStyle,
				className: "echarts-for-react ".concat(className)
			}, divHTMLAttributes));
		};
		return EChartsReactCore$1;
	}(react_1.PureComponent);
	exports.default = EChartsReactCore;
}) });

//#endregion
export default require_core();

//# sourceMappingURL=echarts-for-react_lib_core.js.map